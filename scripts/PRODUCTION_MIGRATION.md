# WordPress è¿ç§»åˆ°ç”Ÿäº§ç¯å¢ƒæŒ‡å—

## ğŸ“‹ ä½ çš„ç”Ÿäº§ç¯å¢ƒé…ç½®

- **åç«¯ API**ï¼š`https://pyq.3331322.xyz/api`
- **WordPress æº**ï¼š`https://x.3331322.xyz`
- **ç®¡ç†å‘˜é‚®ç®±**ï¼š`3331322@gmail.com`

---

## ğŸš€ è¿è¡Œè¿ç§»è„šæœ¬

### æ­¥éª¤ 1ï¼šè¿›å…¥ scripts ç›®å½•

```bash
cd /Users/dc/Documents/Coding/P-weibo-frontend/scripts
```

### æ­¥éª¤ 2ï¼šç¡®ä¿ä¾èµ–å·²å®‰è£…

```bash
npm install
```

### æ­¥éª¤ 3ï¼šè¿è¡Œè¿ç§»

#### ğŸ§ª å…ˆè¿›è¡Œæµ‹è¯•è¿è¡Œï¼ˆæ¨èï¼‰

åœ¨æ­£å¼è¿ç§»å‰ï¼Œå»ºè®®å…ˆä½¿ç”¨ `--dry-run` å‚æ•°æµ‹è¯•ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼š

```bash
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --dry-run
```

è¿™ä¼šæ¨¡æ‹Ÿæ•´ä¸ªè¿ç§»è¿‡ç¨‹ï¼Œä½†**ä¸ä¼šå®é™…ä¸Šä¼ **ä»»ä½•æ•°æ®ã€‚

#### âœ… æ­£å¼è¿ç§»

ç¡®è®¤æµ‹è¯•æ— è¯¯åï¼Œç§»é™¤ `--dry-run` å‚æ•°å¼€å§‹æ­£å¼è¿ç§»ï¼š

```bash
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --batch=2 \
  --delay=3000
```

#### ğŸ“ å‚æ•°è¯´æ˜

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| `--wp-url` | `https://x.3331322.xyz` | WordPress ç½‘ç«™åœ°å€ |
| `--api-url` | `https://pyq.3331322.xyz/api` | åç«¯ API åœ°å€ |
| `--email` | `3331322@gmail.com` | P-Weibo ç®¡ç†å‘˜é‚®ç®± |
| `--password` | ä½ çš„å¯†ç  | P-Weibo ç®¡ç†å‘˜å¯†ç  |
| `--batch` | `2` | æ¯æ‰¹å¤„ç†æ–‡ç« æ•°ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ç½®è¾ƒå°å€¼ï¼‰ |
| `--delay` | `3000` | æ¯ç¯‡æ–‡ç« é—´å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®® 2000-3000ï¼‰ |

---

## ğŸ›ï¸ é«˜çº§é€‰é¡¹

### é™åˆ¶è¿ç§»æ•°é‡

å¦‚æœåªæƒ³è¿ç§»éƒ¨åˆ†æ–‡ç« ï¼ˆä¾‹å¦‚å‰ 10 ç¯‡ï¼‰ï¼š

```bash
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --max=10
```

### è·³è¿‡æŸäº›æ–‡ç« 

å¦‚æœéœ€è¦è·³è¿‡å‰é¢çš„æ–‡ç« ï¼ˆä¾‹å¦‚å‰ 50 ç¯‡ï¼‰ï¼š

```bash
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --skip=50
```

### ä»æœ€æ—§çš„æ–‡ç« å¼€å§‹è¿ç§»

é»˜è®¤æ˜¯ä»æœ€æ–°çš„å¼€å§‹ï¼Œå¦‚æœæƒ³ä»æœ€æ—§çš„å¼€å§‹ï¼š

```bash
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --reverse
```

### è·³è¿‡åª’ä½“æ–‡ä»¶ï¼ˆåªè¿ç§»æ–‡å­—ï¼‰

```bash
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --skip-media
```

---

## âš ï¸ ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹

### 1. ç½‘ç»œç¨³å®šæ€§

ç”±äºæ˜¯è¿œç¨‹è¿ç§»ï¼Œç¡®ä¿ï¼š
- âœ… ç½‘ç»œè¿æ¥ç¨³å®š
- âœ… æœ‰è¶³å¤Ÿçš„ä¸Šä¼ å¸¦å®½ï¼ˆå›¾ç‰‡ä¸Šä¼ éœ€è¦ï¼‰
- âœ… è®¾ç½®è¾ƒå¤§çš„ `--delay` å€¼é¿å…è¶…æ—¶

### 2. æ‰¹æ¬¡å¤§å°

ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨è¾ƒå°çš„æ‰¹æ¬¡ï¼š
- `--batch=1` æˆ– `--batch=2`ï¼ˆæœ€å®‰å…¨ï¼‰
- `--delay=2000` åˆ° `--delay=5000`

### 3. CORS é…ç½®

ç¡®ä¿åç«¯å…è®¸è·¨åŸŸè¯·æ±‚ã€‚æ£€æŸ¥åç«¯çš„ CORS é…ç½®ï¼š
- å…è®¸æ¥è‡ªä½ çš„ IP æˆ–æ‰€æœ‰æ¥æºçš„è¯·æ±‚
- å…è®¸ `Authorization` å¤´

### 4. æ–­ç‚¹ç»­ä¼ 

å¦‚æœä¸­é€”å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨ `--skip` å‚æ•°ä»å¤±è´¥çš„ä½ç½®ç»§ç»­ï¼š

```bash
# å‡è®¾å‰ 30 ç¯‡å·²æˆåŠŸï¼Œä»ç¬¬ 31 ç¯‡å¼€å§‹
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --skip=30
```

### 5. ç›‘æ§è¿›åº¦

è„šæœ¬ä¼šå®æ—¶æ˜¾ç¤ºè¿›åº¦ï¼š
- âœ… æ¯ç¯‡æ–‡ç« çš„å¤„ç†çŠ¶æ€
- âœ… å›¾ç‰‡ä¸‹è½½å’Œä¸Šä¼ æƒ…å†µ
- âœ… æœ€ç»ˆç»Ÿè®¡ä¿¡æ¯

---

## ğŸ› å¸¸è§é—®é¢˜

### 401 Unauthorized

**åŸå› **ï¼šé‚®ç®±æˆ–å¯†ç é”™è¯¯

**è§£å†³**ï¼š
1. ç¡®è®¤é‚®ç®±å’Œå¯†ç æ­£ç¡®
2. å°è¯•æ‰‹åŠ¨ç™»å½•ä¸€æ¬¡ç¡®è®¤å‡­æ®

### ç½‘ç»œè¶…æ—¶

**åŸå› **ï¼šç½‘ç»œæ…¢æˆ–æœåŠ¡å™¨å“åº”æ…¢

**è§£å†³**ï¼š
```bash
# å¢åŠ å»¶è¿Ÿæ—¶é—´
--delay=5000

# å‡å°æ‰¹æ¬¡å¤§å°
--batch=1
```

### CORS é”™è¯¯

**åŸå› **ï¼šåç«¯æ²¡æœ‰æ­£ç¡®é…ç½® CORS

**è§£å†³**ï¼šæ£€æŸ¥åç«¯çš„ CORS ä¸­é—´ä»¶é…ç½®

### å›¾ç‰‡ä¸‹è½½å¤±è´¥

**åŸå› **ï¼šWordPress åª’ä½“æ–‡ä»¶æƒé™é—®é¢˜

**è§£å†³**ï¼š
```bash
# è·³è¿‡åª’ä½“æ–‡ä»¶
--skip-media
```

---

## ğŸ“Š è¿ç§»å®Œæˆå

è¿ç§»å®Œæˆåï¼Œè„šæœ¬ä¼šæ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼š
- æ€»æ–‡ç« æ•°
- æˆåŠŸæ•°é‡
- å¤±è´¥æ•°é‡
- è·³è¿‡æ•°é‡
- æˆåŠŸç‡

æ£€æŸ¥ `scripts/migration.log` æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ã€‚

---

## ğŸ’¡ æ¨èçš„è¿ç§»æµç¨‹

```bash
# 1. å…ˆæµ‹è¯•è¿è¡Œï¼ˆåªè¿ç§» 5 ç¯‡ï¼‰
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --max=5 \
  --dry-run

# 2. æ­£å¼è¿ç§»å°‘é‡æ–‡ç« æµ‹è¯•
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --max=5 \
  --batch=1 \
  --delay=3000

# 3. ç¡®è®¤æ— è¯¯åï¼Œè¿ç§»æ‰€æœ‰æ–‡ç« 
node migrate-wordpress.js \
  --wp-url=https://x.3331322.xyz \
  --api-url=https://pyq.3331322.xyz/api \
  --email=3331322@gmail.com \
  --password=YOUR_PASSWORD \
  --batch=2 \
  --delay=3000
```

---

**å‡†å¤‡å¥½åï¼Œå°† `YOUR_PASSWORD` æ›¿æ¢ä¸ºä½ çš„å®é™…å¯†ç ï¼Œç„¶åè¿è¡Œå‘½ä»¤å³å¯ï¼** ğŸš€
